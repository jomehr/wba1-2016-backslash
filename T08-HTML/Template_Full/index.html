<!DOCTYPE html>
<html lang="de">
<meta charset="UTF-8">
<head>
    <title>Fubuizz</title>
    <link rel="stylesheet" href="../../T09-CSS/style.build.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="background">
</div>
<!--Beginn des Headers -->
<header id="wa_desktop">
    <!--Dieser Div stellt den schwarzen Balken da-->
    <div class="wa_header">
        <!--Dieser Div stellt den schwarzen Balken da-->
        <div class="wa_Navigation">
            <!-- Dieses Div beeinhaltet das Logo --><img class="wa_logo" src="T02/logo.png" alt="Fubuizz_Logo">
            <!-- Dieses Div enthält das Login oben rechts-->
            <nav class="wa_login">
                <ul>
                    <li><a href="#">Login</a></li>
                    <li><a>|</a></li>
                    <li><a href="#">Registrierung</a></li>
                </ul>
            </nav>
        </div>
    </div>
    <!-- Dieses Div stellt den durchsichtigen Balken da-->
    <div id="wa_Navigation2">
        <nav class="wa_menue">
            <ul>
                <li><a href="#" class="js-change-view" data-view=0>Übersicht</a></li>
                <li><a href="#" class="js-change-view" data-view=4>Highscoreliste</a></li>
                <li><a href="#">Teilen</a></li>
                <li><a href="#">Über Fubuizz</a></li>
                <li><a href="#">Einstellungen</a></li>
            </ul>
        </nav>
    </div>
    <!-- Dieses Div enthält das Menü mit den einzelnen Punkten-->
</header>
<header class="wa_header_mobil">
    <div id="wa_Sidenav_mobil" class="wa_sidenav_mobil font-secondary font-light">
        <!--Inhalt vom Sidenav-->
        <ul>
            <li><a href="javascript:void(0)" class="wa_closebtn_mobil" onclick="closeNav()">&times;</a></li>
            <!--Einbindung des Close Buttons mit Funktion-->
            <li><a href="#" class="js-change-view" data-view=0>Übersicht</a></li>
            <li><a href="#" class="js-change-view" data-view=4>Highscoreliste</a></li>
            <li><a href="#">Teilen</a></li>
            <li><a href="#">Über Fubuizz</a></li>
            <li><a href="#">Einstellungen</a></li>
            <li><a href="#">Login | Registrierung</a></li>
        </ul>
    </div>
    <span class="wa_Button_mobil" onclick="openNav()">&#9776;</span>
    <!--Button zum öffnen der Sidenav-->
    <!--Javascriptfunktion Open und Close Button--><img src="T02/img/Logo_Fubuizz.png" class="wa_logo"
                                                        alt="Fubuizz_Logo_Mobile"></header>

<div id="templatespaceholder_handlebars">
</div>

<!-- Beginn des Foooters -->
<footer class="wa_footer">
    <!-- Das footer Element wird in der Klasse definiert -->
    <!-- Der mittige Copyrighttext-->
    <div class="wa_copyright"> © 2016 - Fubuizz</div>
</footer>

<script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.1.2/handlebars.min.js"></script>
<script src="https://rawgit.com/th-koeln/wba1-2016-backslash/master/T13-Datenstruktur_Content/API/BS_API.js"></script>
<script type="text/javascript" src="js/T02/WebApp_Rahmen_Tablet.js"></script>
<script src="js/flickity.pkgd.min.js"></script>
<script type="application/javascript" src="js/T06/collapse.js"></script>
<script type="application/javascript" src="js/T06/quizuebersicht.js"></script>

<!-- Quizinfo Template-->
<script id="quizinfo-template" type="text/x-handlebars-template">
    <!-- body with title, information text, username -->
    {{#quizinfo}}
    <div class="container st_box">
        <!-- <section class="st_box bg-white"> -->
        <div class="row bg-yellow" id="header">
            <div class="col-xs-12">
                <h1>{{titel}}</h1>
            </div>
        </div>
        <div class="row" id="pic">
            <img src="{{bild}}" alt="teaserbild" style="width:100%;">
        </div>
        <div class="row st_erg st_box_content">
            <div class="st_left_col col-lg-8 col-xs-12">
                <p>{{text}}</p>
            </div>
            <div class="st_right_col col-lg-4 col-xs-12">
                <div class="row">
                    <div class="font-bold st_right2 st_rightdown col-xs-6 col-lg-12">
                        <p>{{datum}}</p>
                        <p>{{autor}}</p>
                    </div>
                    <div class="st_right1 col-xs-6 col-lg-12">
                        <p><strong>{{spielzahl}}</strong> mal gespielt</p>
                    </div>
                </div>

            </div>
        </div>

        <!-- buttons  -->
        <div class="row st_buttons">
            <div class="col-lg-4">
                <a class="btn js-change-view" data-view=”0” href="">Übersicht</a>
            </div>
            <div class="col-lg-4">
                <a class="btn js-change-view" data-view=4 data-quizID="{{quizID}}" href="">Highscoreliste</a>
            </div>
            <div class="col-lg-4">
                <a class="btn js-change-view" data-view=2 data-quizID="{{quizID}}" href="">Jetzt spielen!</a>
            </div>
        </div>
        {{/quizinfo}}
        <!-- </section> -->
    </div>
</script>

<!-- Quiz Template-->
<script id="quiz-template" type="text/x-handlebars-template">

    {{#quiz}}
    <div class="container">
        <!-- Erstellung der Content-Box mit weißem Hintergrund -->
        <div class="qr-content bg-white">
            <!-- Erstellung der Kopfzeile mit entsprechendem Thema -->
            <div class="qr-head row qr-no-margin">
                <div class="col-xs-12">
                <h1>Effzeh - mer wisse alles üvver dich</h1>
                </div>
            </div>
        <!-- Platzhalter für den Timer -->
        <div class="qr-timer row qr-no-margin">
            <div class="col-xs-12">
            <p class="qr-text">!Platzhalter Timer!</p>
            </div>
        </div>
        <!-- Hier wird die Frage abgebildet -->
        <div class="qr-question row qr-no-margin">
            <div class="col-xs-12">
            <p class="qr-text">"Welches dieser Zitate wird nicht Werders "Ostfriesen-Alemao" Dieter Eilts zugeschrieben?</p>
            </div>
        </div>
        <!-- Erstellung der Antworten-Box -->
        <div class="qr-inner_box row qr-no-margin">
        <div class="col-x s-12">
        <!-- Button-Eigenschaften werden erstellt -->
        <!-- Farben für kleinen Button werden übergeben -->
        <!-- Farben für großen Button werden übergeben -->
        <!-- Schriften werden übergeben -->
        <div class="qr-answers font-secondary">
            <button class="qr-fg-black bg-lightgrey">
                <!-- kleine Box mit Answer-Key wird erstellt -->
                <span class="qr-short bg-yellow">
                A
                </span>
                <!-- große Box mit Antwort wird erstellt -->
                <span class="qr-long bg-lightgrey" id="wrongAnswer1" onclick="changeAnswerButtonColor('wrongAnswer1')">
                "Das interessiert mich jetzt wie eine geplatzte Currywust im ostfriesischen Wattenmeer."
                 </span>
            </button>

            <button class="qr-fg-black bg-lightgrey">
                <span class="qr-short bg-yellow">
                    B
                </span>
                <span class="qr-long bg-lightgrey" id="wrongAnswer2" onclick="changeAnswerButtonColor('wrongAnswer2')">
                    "Wir dürfen jetzt nicht den Sand in den Kopf stecken."
                </span>
            </button>

            <button class="qr-fg-black bg-lightgrey">
                <span class="qr-short bg-yellow">
                    C
                </span>
                <span class="qr-long bg-lightgrey" id="wrongAnswer3" onclick="changeAnswerButtonColor('wrongAnswer3')">
                    "Wenn meine Oma ein Bus wäre, dann könnte sie hupen."
                </span>
            </button>

            <button class="qr-fg-black bg-lightgrey">
                <span class="qr-short bg-yellow">
                    D
                </span>
                <span class="qr-long bg-lightgrey" id="rightAnswer" onclick="changeAnswerButtonColor('rightAnswer')">
                    "Moin moin, Gascoigne."
                </span>
            </button>
        </div>

        <!-- Feedback-Icons werden erstellt -->
        <div class="qr-answer_icons">
            <div class="qr-answer_icon bg-red"></div>
            <div class="qr-answer_icon bg-red"></div>
            <div class="qr-answer_icon bg-green"></div>
            <div class="qr-answer_icon bg-red"></div>
            <div class="qr-answer_icon bg-green"></div>
            <div class="qr-answer_icon bg-green"></div>
            <div class="qr-answer_icon bg-red"></div>
            <div class="qr-answer_icon bg-mediumgrey"></div>
            <div class="qr-answer_icon bg-mediumgrey"></div>
            <div class="qr-answer_icon_last bg-mediumgrey"></div>
        </div>
        <!-- Button für das Beenden des Quizzes wird erstellt -->
        <div class="qr-button">
            <button type="button" id="quiz_beenden">Quizrunde beenden</button>
        </div>
        </div>
        {{/quiz}}
    </div>
    </div>
    </div>
    </script>

<!-- Quizend Template-->
<script id="Quizend-template" type="text/x-handlebars-template">

    {{#datquiz}}
    <div class="container ss_box">
        <header class="bg-yellow">
            <h1 id="JS_Titel">{{titel}}</h1>
        </header>
        <div class="ss_erg ss_box_content row">
            <div class="ss_left col-md-8 col-xs-12">
                <h2 style="margin-top: 0px;">Dein Ergebnis</h2>
                <div class="ss_score row">
                    <div class="ss_score_sp col-md-7 col-xs-12">
                        <p class="ss_mobile_points_txt"></p>
                        <div class="ss_score_balken bg-mediumgrey">
                            <div class="ss_scale_score" id="JS_ScaleScore" style="width: 10%;">
                            </div>
                        </div>
                        <p class="ss_mobile_answer_txt"></p>
                        <div class="ss_score_points" id="JS_Score">
                        </div>
                    </div>

                    <div class="ss_score_txt col-md-5">
                        <p id=JS_punkte>{{points}} von {{maxpoints}}</p>
                        <p id=JS_richtig>{{countright}} von {{countquestions}}</p>
                    </div>
                </div>
                <p>Ich will mehr zu diesem Thema wissen</p>
                <div class="ss_scoreboard">
                    <p>Neue Position</p>
                    <table class="font-bold table">
                        {{#each highscore}}
                        <tr>
                            <td>{{this.position}}</td>
                            <td>{{this.name}}</td>
                            <td>{{this.punktzahl}} Punkte</td>
                        </tr>
                        {{/each}}
                    </table>

                </div>
            </div>
            <div class="ss_right col-md-4 col-xs-12">
                <figure>
                    <img src="{{bild}}" alt="Fan1.jpg" class="img-responsive" id="{{bild}}"/>
                    <figcaption>

                        <p id="JS_Text">{{text}}</p>

                    </figcaption>
                </figure>
            </div>
        </div>


        <div class="ss_buttons ss_box_content row">
            <div class="col-sm-4">
                <a class="btn js-change-view" data-view=0 href="">Übersicht</a>
            </div>
            <div class="col-sm-4">
                <a class="btn js-change-view" data-view=4 data-quizID="{{quizID}}" href="">Highscoreliste</a>
            </div>
            <div class="col-sm-4">
                <a class="btn js-change-view" data-view=2 data-quizID="{{quizID}}" href="">Jetzt spielen!</a>
            </div>
        </div>
        {{/datquiz}}
    </div>

    <!--  allgemeine mit Inhalt des Sliders  -->
    <div class="container ss_box" style="padding-bottom:80px">

        <h2 style="text-align: center; padding-top: 24px;">Das könnte dir auch gefallen</h2>

        <!-- Carousel -->
    		<div class="js-carousel">
            {{#each quizes}}
            <!-- Carousel Cell-->
            <div class="js-carousel-cell">
                <div class="ss_slider_content row">
                    <!--  linke Seite vom Slider  -->
                    <div class="col-md-4">
                        <h2 id="JS_SliderTitel">{{this.titel}}</h2>
                        <img class="img-responsive" src={{this.bild}} alt="Stadion10.jpg" id="JS_SliderBild"/>
                    </div>
                    <!--  Mitte vom Slider  -->
                    <div class="col-md-6 ss_slider_text">
                        <p id="JS_SliderText">{{this.text}}</p>
                        <div class="ss_slider_author font-bold" id="JS_SliderDU">
                            {{this.datum}}<br/>
                            {{this.autor}}
                        </div>
                    </div>
                    <!--  rechte Seite vom Slider  -->
                    <div class="col-md-2 ss_slider_right">
                        <p><span class="font-bold" id="JS_SliderPlayed">{{this.spielzahl}}</span> mal gespielt</p>
                        <div class="ss_slider_points fg-white bg-darkgrey font-bold">8 / 10 Punkten</div>
                        <a class="btn js-change-view" data-view=2 data-quizid="{{this.quizID}}" href="">Jetzt spielen!</a>
                    </div>
                </div>
            </div>
            {{/each}}
        </div>
    </div>

</script>

<!-- Quizoverview // HOME -->
<script id="Quizoverview-template" type="text/x-handlebars-template">
  <!-- Quizübersicht -->
  <main class="container qo-content-box bg-white">
    <!-- Headline -->
    <header class="row bg-yellow qo-headline-box">
      <div class="col-sm-4">
        <h1 class="qo-headline">Quizzübersicht</h1>
      </div>

      <!-- Dropdown sortieren -->
      <div class="col-sm-4">
        <div class="qo-wrapper-select-box">
          <select class="qo-select-box">
            <option value="datum">nach Erscheinungsdatum</option>
            <option value="alphabetisch">alphabetisch</option>
            <option value="beliebtheit">nach Beliebtheit</option>
          </select>
        </div>
      </div>
      <!-- End Dropdown sortieren -->

      <!-- Suchfeld -->
      <div class="col-sm-4">
        <input type="text" class="qo-search-box" maxlength="30" placeholder="suchen">
      </div>
      <!-- End Suchfeld -->
    </header>
    <!--End Headline -->

    <!-- Auflistung Quizspiele -->
    <section>
      <ul>
        <!-- Quizspiel -->
        {{#each quizes}}
        <li class="js-collapse-section">
          <div class="row qo-quiz-summary js-quiz-summary">

            <!-- Headline -->
            <div class="col-sm-8">
              <a href="#" class="qo-collapse-link js-collapse-link"><i class="qo-arrow ico-light-arrow-right"></i><h2 class="qo-subheadline">{{titel}}</h2></a>
            </div>
            <div class="col-sm-4 _hidden-xs">
              <p class="qo-infos"><strong>{{spielzahl}}</strong> mal gespielt</p>
            </div>
          </div>


          <div class="row qo-quiz-details js-collapse-details _same-height-sm">
            <!-- Quizbild -->
            <div class="col-sm-6 col-md-4">
              <img class="qo-image" src="{{bild}}" alt="{{titel}}">
            </div>
            <!-- End Quizbild -->

            <!-- Quizinfos -->
            <div class="col-sm-6 col-md-8">
              <div class="row">
                <div class="col-sm-12 col-md-10">
                  <p class="qo-text">{{text}}</p>
                </div>
              </div>

              <div class="row qo-quizinfo-box _same-height-xs">
                <div class="col-xs-6 col-sm-4 col-md-6">
                  <p class="qo-time">
                    <time>{{datum}}</time>
                  </p>
                  <p class="qo-author">{{autor}}</p>
                </div>
                <div class="col-xs-6 _visible-xs-block qo-counter">
                  <p><strong>{{spielzahl}}</strong> mal gespielt</p>
                </div>
                <div class="col-sm-8 col-md-6 _hidden-xs">
                  <a data-view=2 href="#" data-quizid="{{this.quizID}}" class="btn qo-button js-change-view">Jetzt spielen!</a>
                </div>
              </div>
              <div class="row qo-quizinfo-box">
                <div class="col-xs-12 _visible-xs-block">
                  <a data-view=2 href="#" data-quizid="{{this.quizID}}"  class="btn qo-button js-change-view">Jetzt spielen!</a>
                </div>
              </div>
            </div>
            <!-- End Quizinfos -->
          </div>
        </li>
        {{/each}}
        <!-- End Quizspiel -->

      </ul>
    </section>
    <!--End Auflistung Quizspiele -->
  </main>
  <!-- End Quizübersicht -->

  <!-- Zuletzt gespielt -->
  <section class="container qo-content-box qo-box-last-played bg-white">
    <div class="row">

      <!-- Healine -->
      <div class="col-xs-12">
        <h1 class="qo-headline -smallcentered font-primary">Zuletzt gespielt</h1>
      </div>
      <!-- End Headline -->
    </div>

    <!-- Carousel -->
    <div class="js-carousel">

      <!-- Carousel Cell-->
      <div class="js-carousel-cell">

        <div class="row qo-quiz-summary">

          <!-- Headline -->
          <div class="col-sm-8">
            <h2 class="qo-subheadline -withoutmargin">Das Stadion Quizz</h2>
          </div>
          <div class="col-sm-4 _hidden-xs ">
            <p class="qo-infos"><strong>67</strong> mal gespielt</p>
          </div>

          <!-- End Headline -->
        </div>


        <div class="row qo-quiz-details  _same-height-sm">
          <!-- Quizbild -->
          <div class="col-sm-6 col-md-4">
            <img class="qo-image" src="T06/assets/img/stadion.png" alt="Fußballstadion">
          </div>
          <!--End Quizbild -->

          <!-- Quizinfos -->
          <div class="col-sm-6 col-md-8">
            <div class="row">
              <div class="col-sm-12 col-md-10">
                <p class="qo-text">Die größten, bedeutensten, modernsten und wichtigsten Stadien der Welt. Kaum etwas ist bei großen Verienen so bedeutend wie das Stadion. Es ist nicht nur ein Statussymbol für jeden erfolgreichen Verein, sondern oft auch ein Denkmal für große Ereignisse in der Historie eines Vereiens. Hier findest Fragen zu den Stadien der Welt. Auf geht's! </p>
              </div>
            </div>

            <div class="row qo-quizinfo-box _same-height-xs">
              <div class="col-xs-6 col-sm-4 col-md-6">
                <p class="qo-time">
                  <time>17.06.2016</time>
                </p>
                <p class="qo-author">Hennes48</p>
              </div>
              <div class="col-xs-6 _visible-xs-block qo-counter">
                <p><strong>37</strong> mal gespielt</p>
              </div>
              <div class="col-sm-8 col-md-6 _hidden-xs">
                <p class="qo-points">8 / 10 Punkten</p>
                <a href="#" class="btn qo-button js-change-view" data-view=2 data-quizid="0">Erneut spielen!</a>
              </div>
            </div>
            <div class="row qo-quizinfo-box">
              <div class="col-xs-12 _visible-xs-block">
                <p class="qo-points">beendet mit 8/10 Punkte</p>
                <a href="#" class="btn qo-button js-change-view" data-view=2 data-quizid="0">Erneut spielen!</a>
              </div>
            </div>

          </div>
          <!-- End Quizinfos -->
        </div>
      </div>
      <!-- End Carousel Cell-->
      <!-- Carousel Cell-->
      <div class="js-carousel-cell">
        <div class="row qo-quiz-summary">

          <!-- Headline -->
          <div class="col-sm-8">
            <h2 class="qo-subheadline -withoutmargin">Das Stadion Quizz</h2>
          </div>
          <div class="col-sm-4 _hidden-xs ">
            <p class="qo-infos"><strong>67</strong> mal gespielt</p>
          </div>

          <!-- End Headline -->
        </div>


        <div class="row qo-quiz-details  _same-height-sm">
          <!-- Quizbild -->
          <div class="col-sm-6 col-md-4">
            <img class="qo-image" src="T06/assets/img/stadion.png" alt="Fußballstadion">
          </div>
          <!--End Quizbild -->

          <!-- Quizinfos -->
          <div class="col-sm-6 col-md-8">
            <div class="row">
              <div class="col-sm-12 col-md-10">
                <p class="qo-text">Die größten, bedeutensten, modernsten und wichtigsten Stadien der Welt. Kaum etwas ist bei großen Verienen so bedeutend wie das Stadion. Es ist nicht nur ein Statussymbol für jeden erfolgreichen Verein, sondern oft auch ein Denkmal für große Ereignisse in der Historie eines Vereiens. Hier findest Fragen zu den Stadien der Welt. Auf geht's! </p>
              </div>
            </div>

            <div class="row qo-quizinfo-box _same-height-xs">
              <div class="col-xs-6 col-sm-4 col-md-6">
                <p class="qo-time">
                  <time>17.06.2016</time>
                </p>
                <p class="qo-author">Hennes48</p>
              </div>
              <div class="col-xs-6 _visible-xs-block qo-counter">
                <p><strong>37</strong> mal gespielt</p>
              </div>
              <div class="col-sm-8 col-md-6 _hidden-xs">
                <p class="qo-points">8 / 10 Punkten</p>
                <a href="#" class="btn qo-button js-change-view" data-view=0>Erneut spielen!</a>
              </div>
            </div>
            <div class="row qo-quizinfo-box">
              <div class="col-xs-12 _visible-xs-block">
                <p class="qo-points">beendet mit 8/10 Punkte</p>
                <a href="#" class="btn qo-button js-change-view" data-view=0>Erneut spielen!</a>
              </div>
            </div>

          </div>
          <!-- End Quizinfos -->
        </div>
      </div>
      <!-- End Carousel Cell-->
    </div>
  </section>
  <!--End Zuletzt gespielt -->
</script>


<!--
Highscore fill Funktion & Quiz Info
-->
<script type="text/javascript">
    $(function () {
        var Quizobject = {};
        //Userdaten rand generieren solange keine bestehen!!!
        var rand1 = Math.random(); //Punkte
        var rand2 = 1000; //maxPunkte
        var rand3 = Math.random(); //richtige antworten
        var rand4 = 10; //anzahl Fragen
        rand1 = Math.round(1000 * rand1);
        rand3 = Math.round(10 * rand3);
        sessionStorage.setItem('points', rand1);
        sessionStorage.setItem('maxpoints', rand2);
        sessionStorage.setItem('correctanswers', rand3);
        sessionStorage.setItem('amountquestions', rand4);
        sessionStorage.setItem('quizid', 0);
        sessionStorage.setItem('username', "waaaow");
        //Hier kommen die User Quiz Data
        var sessionobject = {
            "points": sessionStorage.getItem('points'),
            "maxpoints": sessionStorage.getItem('maxpoints'),
            "countright": sessionStorage.getItem('correctanswers'),
            "countquestions": sessionStorage.getItem('amountquestions'),
            "quizID": sessionStorage.getItem('quizid'),
            "username": sessionStorage.getItem('username'),
            "view": sessionStorage.getItem('view')
        };
        if (sessionobject.view === undefined) {
            sessionobject.view = 0;
        }


        // Switch view
        // 0 default (startseite)
        // 1 quizInfo
        // 2 quiz
        // 3 Quizend
        // 4 Quiz Highscore
        function viewSite() {
            console.log($("#templatespaceholder_handlebars"));
            $('#templatespaceholder_handlebars').empty();

            switch (sessionobject.view) {
                case "1":
                    quizinfo();
                    break;
                case "2":
                    quiz();
                    break;
                case "3":
                    quizend();
                    break;
                case "4":
                    break;
                default:
                    quizoverview();
                    console.log("Bitte sessionStorage.setItem('view','id') in die Console eingeben. \n id info : \n 0 = default \n 1 = quizinfo \n 2 = quiz(undefined) \n 3 = quizend \n 4 = highscore(undefined)");
                    break;
            }
        }
        function clicklistener (){
          var elements = document.querySelectorAll('.js-change-view');
          console.log("test");
          //Eventlistener zu jedem Link hinzuf�gen
          for (i = 0; i < elements.length; i++) {
              var click_eventcheck = elements[i].getAttribute('events');

              if(click_eventcheck === null) {
                elements[i].setAttribute('events',"true");
                elements[i].removeEventListener('click',handleClick);
                elements[i].addEventListener('click', handleClick);
              }

          }

          function handleClick(e) {

            //Standardverhalten preventen
            e.preventDefault();

            //data auslesen
            var click_quizid = e.currentTarget.getAttribute('data-quizID');
            var click_view = e.currentTarget.getAttribute('data-view');
            if(click_quizid === null || click_quizid === undefined) {
              sessionobject.quizID=0;
            } else {
              sessionobject.quizID=click_quizid;
            }
            sessionStorage.setItem('quizid', sessionobject.quizID);
            if(click_view !== sessionobject.view) {
              sessionobject.view=click_view;
              sessionStorage.setItem('view',sessionobject.view);
            }
            viewSite();
        }
      }
         function quiz() {
             getQuizByID(sessionobject.quizID);
             $(document).on("onQuizData", function (event, data) {
              Quizobject.quiz = data;
              Quizobject.sessionobject = sessionobject;
              var source = $("#quiz-template").html();
              var template = Handlebars.compile(source);
               $('#templatespaceholder_handlebars').append(template(Quizobject));
               clicklistener();
            });
       }

        function quizend() {
            getQuizViewByID(sessionobject.quizID);
            $(document).on("onQuizViewByID", function (event, data) {
                getHighscorePositions(sessionobject.quizID, sessionobject.username, sessionobject.points);
                var quizInfo = {};
                if (quizInfo.bild === "/URL") {
                    quizInfo.bild = "https://raw.githubusercontent.com/th-koeln/wba1-2016-backslash/master/T10-Asset/Bilder/Bilder%20Klein/Stadion3-Klein.jpg";
                }
                Quizobject.datquiz = data;
            });

            // HIGHSCORE info

            $(document).on("onHighscorePositions", function (event, data) {
                getQuizView(7);
                $.extend(Quizobject.datquiz, data);
            });


            //Random Quiz Vorschlag

            $(document).on("onQuizView", function (event, data) {
                var nQuizObject = data; //copy object
                var quizInfo = data;
                var icount = 0;
                var ARQused = [];
                ARQused[0] = sessionobject.quizID;
                var iRand = Math.random();

                //RAND Quiz außer aufgerufene Quiz.
                for (var i = 0; icount < 4; i++) {
                    var iRand = Math.round(Math.random() * ( quizInfo.length - 0 ));
                    if (iRand !== 0) {
                        iRand--;
                    }
                    while ((ARQused.indexOf("" + iRand) > -1)) {
                        iRand = Math.round(Math.random() * ( quizInfo.length - 0 ));
                        if (iRand !== 0) {
                            iRand--;
                        }
                    }

                    if (quizInfo[iRand].quizID !== sessionobject.quizID) { // <- Abfrage ob QuizID == Random ID ist wenn true neu generieren
                        icount++;
                        ARQused[icount] = quizInfo[iRand].quizID;
                        nQuizObject[icount - 1] = quizInfo[iRand];
                        if (quizInfo[iRand].bild === "/URL") {
                            quizInfo[iRand].bild = "https://raw.githubusercontent.com/th-koeln/wba1-2016-backslash/master/T10-Asset/Bilder/Bilder%20Klein/Stadion3-Klein.jpg";
                        }
                    }
                }

                Quizobject.quizes = nQuizObject;
                Quizobject.quizes = Quizobject.quizes.slice(0, 4);
                $.extend(Quizobject.datquiz, sessionobject);
                var source = $("#Quizend-template").html();
                var template = "";
                template = Handlebars.compile(source);
                $('#templatespaceholder_handlebars').append(template(Quizobject));
                //Aktualisieren der richtig Falsch antworten & Scalebar füllen
                var percent = Math.round((sessionobject.points / sessionobject.maxpoints) * 100);
                document.getElementById("JS_ScaleScore").style.width = percent + "%";
                //Red/Green Icons füllen
                item = document.getElementById('JS_Score');
                var redicon = '<div class="ss_score_point bg-red" ></div>';
                var greenicon = '<div class="ss_score_point bg-green" ></div>';
                var length = sessionobject.countquestions;
                for (var i = 0; i < length; i++) {
                    var random = Math.random();
                    if (random >= 0.5) {
                        item.innerHTML += redicon;
                    } else {
                        item.innerHTML += greenicon;
                    }
                }
                var flickityConfig = {
                  // options
                  cellAlign: 'left',
                  cellSelector: '.js-carousel-cell',
                  contain: true,
                  imagesLoaded: true,
                  prevNextButtons: false,
                  setGallerySize: true,
                }
                var $carousel = $('.js-carousel').flickity(flickityConfig)
                slideshowNavi.init($carousel);
                clicklistener();
            });
        }

        function quizoverview() {
            getQuizView(10);
            //Random Quiz Vorschlag
            $(document).on("onQuizView", function (event, data) {
                Quizobject.quizes = data; //copy object
                var source = $("#Quizoverview-template").html();
                var template = Handlebars.compile(source);

                $('#templatespaceholder_handlebars').append(template(Quizobject));
                collapse.init();
                var flickityConfig = {
                  // options
                  cellAlign: 'left',
                  cellSelector: '.js-carousel-cell',
                  contain: true,
                  imagesLoaded: true,
                  prevNextButtons: false,
                  setGallerySize: true,
                }
                var $carousel = $('.js-carousel').flickity(flickityConfig)
                slideshowNavi.init($carousel);
                clicklistener ();
            });
        }

        function quizinfo() {
            getQuizViewByID(sessionobject.quizID);
            $(document).on("onQuizViewByID", function (event, data) {
                Quizobject.quizinfo = data;
                Quizobject.sessionobject = sessionobject;
                var source = $("#quizinfo-template").html();
                var template = Handlebars.compile(source);

                $('#templatespaceholder_handlebars').append(template(Quizobject));
                clicklistener();
            });
        }
        viewSite();
    });

</script>
</body>
</html>
